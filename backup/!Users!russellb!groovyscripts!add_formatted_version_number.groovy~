import org.jvnet.hudson.tools.versionnumber.VersionNumberBuilder

/*
If you wanted to iterate through job objects, for instance all jobs within a certain view, you could:

def items = Hudson.instance.getView("WolframAlpha").getView("Paclets").getItems()
for (item in items){
    .... do something ....
}

*/

// Here, we have a hard-coded list of job names to target with the script's action.
job_names = [
     "IssueMaker",
     "RETestJob"
]

// iteration method when you have a list of names, rather than job objects
for (job_name in job_names){
    job = Hudson.instance.getItems().find{it.name == job_name}

    wrappers = job.getBuildWrappersList()
    wrapper = wrappers.find{it.class == VersionNumberBuilder}

    // if the job doesn't already have a VersionNumber wrapper, add one.
    if (wrapper == null){

       // Add new BuildWrapper object to this job's buildWrappersList
       wrappers.add(new VersionNumberBuilder(
       		"\${BUILD_YEAR}.\${BUILD_MONTH, XX}.\${BUILD_DAY,XX}.\${BUILDS_TODAY,XX}",
       		"","CREATIONID","","","","",false,true))
    }
}