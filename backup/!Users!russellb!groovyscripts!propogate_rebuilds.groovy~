import hudson.plugins.copyandunarchive.CopyAndUnarchiveArtifact
import hudson.model.Hudson

rebuilt_jobs = []

all_projects = Hudson.instance.getItems()
for (project in all_projects){
    for (build_step in project.builders){
    	if (build_step.getClass() == hudson.plugins.copyandunarchive.CopyAndUnarchiveArtifact){
	   if (build_step.getProjectName() == dependency_job){
	      rebuilt_jobs.add(project.getName())
	      Hudson.instance.queue.schedule(project)	      
	   }
	}
    }
}

message = "The following jobs will be rebuilt as a result of project dependencies:\n"
for (w in rebuilt_jobs){
    message+= "\t" + w + "\n"
}
message